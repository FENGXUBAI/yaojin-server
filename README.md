# 要进 (Yaojin) - 扑克牌游戏 App

这是一个基于 React Native (Expo) 开发的扑克牌游戏“要进”。支持3人或4人联机游玩（目前为单机逻辑演示版）。

## 游戏规则简介

*   **牌数**：54张（含大小王）。
*   **牌型**：单牌、对子、顺子、连对、炸（3张）、轰（4张）、王炸。
*   **大小**：3最小，2最大，A其次。顺子中 123 最大，QKA 第二大。
*   **特殊规则**：
    *   **起炸/起轰**：两张4可以“起”上家的炸（3张），三张4可以“起”上家的轰（4张或王炸），将上家的牌收入手中。
    *   **进贡/回贡**：输家向赢家进贡最大牌，赢家回贡任意牌。
    *   **革命**：若进贡者手中有王炸，则免除进贡。

## 开发环境设置

本项目使用 Expo 框架。请确保已安装 Node.js。

### 1. 安装依赖

在项目根目录 `yaojin/` 下打开终端（PowerShell 或 CMD），运行：

```powershell
cd yaojin
npm install
```

### 2. 运行项目

启动 Expo 开发服务器：

```powershell
npm start
```

按 `a` 在 Android 模拟器运行，按 `w` 在 Web 浏览器运行，或使用 Expo Go App 扫描二维码在真机运行。

### 3. 运行测试

本项目包含完整的游戏逻辑单元测试。

运行所有测试：

```powershell
npm test
```

或者运行自定义的轻量级测试脚本（无需 Jest 环境）：

```powershell
npx ts-node scripts/test_runner.ts
```

## 项目结构

*   `App.tsx`: 主界面与 UI 逻辑。
*   `src/engine/`: 游戏核心引擎。
    *   `cards.ts`: 扑克牌定义、洗牌、排序。
    *   `patterns.ts`: 牌型识别与比较逻辑。
    *   `game.ts`: 游戏状态管理、出牌轮转、进贡逻辑。
*   `src/__tests__/`: 单元测试文件。

## 待办事项

*   [ ] 实现多人联机网络通信。
*   [ ] 完善 UI 交互（拖拽出牌、动画效果）。
*   [ ] 增加 AI 玩家。
