<!--pages/rank/rank.wxml - æ’è¡Œæ¦œ-->
<view class="rank-container">
  <!-- æ’è¡Œæ¦œç±»å‹åˆ‡æ¢ -->
  <view class="rank-header">
    <view class="rank-tab {{rankType === 'wins' ? 'active' : ''}}" bindtap="switchRankType" data-type="wins">
      <text>èƒœåœºæ¦œ</text>
    </view>
    <view class="rank-tab {{rankType === 'coins' ? 'active' : ''}}" bindtap="switchRankType" data-type="coins">
      <text>é‡‘å¸æ¦œ</text>
    </view>
  </view>

  <!-- å‰ä¸‰å -->
  <view class="top-three" wx:if="{{rankList.length >= 3}}">
    <view class="top-item second">
      <text class="crown">ğŸ¥ˆ</text>
      <view class="top-avatar avatar-placeholder">
        <text>{{rankList[1].nickname[0] || '2'}}</text>
      </view>
      <text class="top-name">{{rankList[1].nickname}}</text>
      <text class="top-score">{{rankList[1].score}}</text>
    </view>
    <view class="top-item first">
      <text class="crown">ğŸ‘‘</text>
      <view class="top-avatar avatar-placeholder">
        <text>{{rankList[0].nickname[0] || '1'}}</text>
      </view>
      <text class="top-name">{{rankList[0].nickname}}</text>
      <text class="top-score">{{rankList[0].score}}</text>
    </view>
    <view class="top-item third">
      <text class="crown">ğŸ¥‰</text>
      <view class="top-avatar avatar-placeholder">
        <text>{{rankList[2].nickname[0] || '3'}}</text>
      </view>
      <text class="top-name">{{rankList[2].nickname}}</text>
      <text class="top-score">{{rankList[2].score}}</text>
    </view>
  </view>

  <!-- æ’è¡Œåˆ—è¡¨ -->
  <view class="rank-list" wx:if="{{rankList.length > 3}}">
    <view class="rank-item" wx:for="{{rankList}}" wx:key="index" wx:if="{{index >= 3}}">
      <text class="rank-num">{{index + 1}}</text>
      <view class="rank-avatar avatar-placeholder">
        <text>{{item.nickname[0] || '#'}}</text>
      </view>
      <view class="rank-info">
        <text class="rank-name">{{item.nickname}}</text>
        <text class="rank-win-rate">èƒœç‡ {{item.winRate || '0%'}}</text>
      </view>
      <text class="rank-score">{{item.score}}</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{rankList.length === 0}}">
    <text class="empty-icon">ğŸ†</text>
    <text class="empty-text">æš‚æ— æ’è¡Œæ•°æ®</text>
  </view>
</view>